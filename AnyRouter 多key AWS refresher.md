
[!!!VSC CCA&CCR&CPG ä¸‰å¼•æ“ Master](!!!VSC%20CCA&CCR&CPG%20ä¸‰å¼•æ“%20Master.md)
[!!æµ‹è¯•rrxyxyz_Next VSCode+AnyRouterCC](!!æµ‹è¯•rrxyxyz_Next%20VSCode+AnyRouterCC.md)

[WIN_CCA AnyRouter Fresher_PROJECT_SUMMARY](WIN_CCA%20AnyRouter%20Fresher_PROJECT_SUMMARY.md)
[crontab_config](crontab_config.txt)

'å˜åŒ–'æ›´æ–°ä¸º'ä½™é¢å˜åŒ–'("ä½™é¢å˜åŒ–"(=ä»Šæ—¥æœ€æ–°'å½“å‰ä½™é¢'-æ˜¨æ—¥æœ€è¿‘'å½“å‰ä½™é¢') åœ¨'ä½™é¢å˜åŒ–'åå¢åŠ ä¸¤åˆ—: 
- "æ¶ˆè€—å˜åŒ–"(=ä»Šæ—¥æœ€æ–°'å†å²æ¶ˆè€—'-æ˜¨æ—¥æœ€è¿‘'å†å²æ¶ˆè€—');
-  "æ–°å¢èµ å€¼"(="ä½™é¢å˜åŒ–"-"æ¶ˆè€—å˜åŒ–")


# ğŸ¯ [RRXS] AnyRouteré¢åº¦è‡ªåŠ¨åˆ·æ–°ï¼šV19.0å¤šè´¦å·é«˜å¯ç”¨ä½“ç³»

> **åˆ›å»ºæ—¥æœŸ:** 2025-10-11
> **æ›´æ–°æ—¥æœŸ:** å¾…å®š (V19.0éƒ¨ç½²å®Œæˆåæ›´æ–°)
> **æ ‡ç­¾:** #RRXS/AIä¸æ•ˆç‡å·¥å…· #Docker #Playwright #Crontab #è‡ªåŠ¨åŒ– #å¤šè´¦å·ç»´æŠ¤
> **é¢œè‰²ç³»åˆ—:** æ·±æµ·è“ (AIä¸æ•ˆç‡å·¥å…· RGB: 47, 85, 151)
> **æ ¸å¿ƒè¡ŒåŠ¨å£å·:** åˆ«å†çæ‘¸ç´¢ï¼Œå’±ä»¬ç”¨100å¤©ï¼Œä¸€èµ·ä¸ªäººå‡çº§, è¿æ¥æ–°å¢ƒç•Œã€‚

## ä¸€ã€æ ¸å¿ƒä»·å€¼ï¼šä»â€œå•å…µä½œæˆ˜â€åˆ°â€œä½“ç³»ç»´æŠ¤â€

V19.0 è§£å†³äº†ç½‘ç»œä¸ç¨³å®šï¼ˆé€šè¿‡ **JavaScript ç»ˆæå®šä½**ï¼‰å’Œ**å¤šè´¦å·ç®¡ç†**ä¸¤å¤§ç—›ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº† **EC2 ç£ç›˜è‡ªåŠ¨æ¸…ç†**ä»»åŠ¡ï¼Œå°†æ•ˆç‡è‡ªåŠ¨åŒ–ä½“ç³»æ¨å‘æè‡´ã€‚

### æ¶æ„å›é¡¾ï¼šé“ä¸‰è§’ç¨³å®šæ¶æ„

| æ¶æ„å±‚ | å·¥å…·/æŠ€æœ¯ | æ ¸å¿ƒä½œç”¨ | V19.0 å‡çº§ç‚¹ |
| :--- | :--- | :--- | :--- |
| **ä¸»æœºå±‚** | AWS EC2 (Ubuntu) | 24/7 è¿è¡Œç¯å¢ƒ | **æ–°å¢** æ¯æœˆè‡ªåŠ¨ç£ç›˜æ¸…ç†ä»»åŠ¡ |
| **ç¯å¢ƒå±‚** | Docker | éš”ç¦» Playwright ä¾èµ– | - |
| **è„šæœ¬å±‚** | Python + Playwright (V19.0) | æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•å’Œç‚¹å‡» | **æ ¸å¿ƒé‡æ„**ï¼šå¤šè´¦å·å¾ªç¯ + JavaScriptå®šä½å‰ç½® |
| **è°ƒåº¦å±‚** | Crontab | æ¯å¤©å®šæ—¶è§¦å‘ Docker ä»»åŠ¡ | **æ–°å¢** Docker ç³»ç»Ÿå†—ä½™æ•°æ®æ¸…ç†ä»»åŠ¡ |

---

## äºŒã€V19.0 å®æ–½æ­¥éª¤ï¼šç»ˆæéƒ¨ç½²

### ğŸš¨ æ­¥éª¤ A: CCA è„šæœ¬é‡æ„ï¼ˆWIN-PS ç»ˆç«¯æ“ä½œï¼‰

è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œåˆ©ç”¨ WIN-PS/CCA (Opus) çš„èƒ½åŠ›ï¼Œå°† V18.0 å‡çº§ä¸ºå¤šè´¦å· V19.0ï¼Œå¹¶ä¼˜åŒ–æ€§èƒ½ã€‚

#### **è¯·å°†ä»¥ä¸‹æç¤ºè¯ï¼Œå®Œæ•´åœ°ç²˜è´´ç»™æ‚¨çš„ WIN-PS CCA (Sonnet 4.5/Opus)ï¼š**
[WIN_CCA AnyRouter Fresher_PROJECT_SUMMARY](WIN_CCA%20AnyRouter%20Fresher_PROJECT_SUMMARY.md)

```
è§’è‰²ï¼šæ‚¨æ˜¯ç²¾é€š Playwright å¼‚æ­¥ç¼–ç¨‹å’Œ Python é¡¹ç›®é‡æ„çš„é¡¶çº§ä¸“å®¶ã€‚æˆ‘éœ€è¦æ‚¨åŸºäºæˆåŠŸçš„ V18.0 è„šæœ¬ï¼Œå®ç°**å¤šè´¦å·åˆ·æ–°**å’Œ**ç³»ç»Ÿç»´æŠ¤**ã€‚

é¡¹ç›®åç§°ï¼šAnyRouter é¢åº¦è‡ªåŠ¨åˆ·æ–° å·¥ä½œç›®å½•ï¼š/home/ubuntu/anyrouter-refresher (åœ¨ AWS EC2 ä¸Š)

ç›®æ ‡ï¼š è¯·æä¾›ä¸€ä¸ª **V19.0 å®Œæ•´è„šæœ¬** å’Œä¸€ä¸ª **æ–°çš„ Crontab å®Œæ•´é…ç½®**ã€‚

è¡ŒåŠ¨æ­¥éª¤ï¼š

1. **V19.0 è„šæœ¬é‡æ„ (å¤šè´¦å·æ”¯æŒä¸ä¼˜åŒ–)ï¼š** a. **å¤šè´¦å·é…ç½®ï¼š** å°†å½“å‰çš„ CONFIG æ›´æ”¹ä¸º `ACCOUNT_LIST`ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—å…¸çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å« `'username'` å’Œ `'password'`ï¼Œä»¥åŠä¸€ä¸ª `'name'` å­—æ®µç”¨äºæ—¥å¿—è®°å½•ã€‚ * **è¯·ä½¿ç”¨ä»¥ä¸‹ç¤ºä¾‹æ•°æ®è¿›è¡Œé‡æ„ï¼š** `python ACCOUNT_LIST = [ {'username': '123463452', 'password': '123463452', 'name': 'ä¸»å·-RRXS'}, {'username': 'user_b', 'password': 'pass_b', 'name': 'å‰¯å·-æµé‡'} ]` b. **ä¸»å‡½æ•°é‡æ„ï¼š** å°† `main()` å‡½æ•°é‡æ„ä¸ºå¾ªç¯éå† `ACCOUNT_LIST`ã€‚å¯¹äºæ¯ä¸ªè´¦å·ï¼Œéƒ½éœ€è¦è°ƒç”¨ `refresher.run_single_account(account_data)`ï¼Œå¹¶åœ¨æ¯æ¬¡è¿è¡Œåç¡®ä¿æµè§ˆå™¨èµ„æºè¢«å®Œå…¨å…³é—­ï¼Œä»¥ä¾¿ä¸ºä¸‹ä¸€ä¸ªè´¦å·å¯åŠ¨æ–°ä¼šè¯ã€‚ c. **åˆ·æ–°ä¼˜åŒ– (JavaScriptå®šä½æå‰)ï¼š** åŸºäº V18.0 çš„æˆåŠŸç»éªŒï¼Œå°† `'JavaScriptå®šä½'` ç­–ç•¥æå‡ä¸º**ç¬¬ä¸€ä¸ª**å°è¯•çš„ç­–ç•¥ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„è¶…æ—¶ç­‰å¾…ã€‚
    
2. **Crontab ä»»åŠ¡åˆ—è¡¨ï¼š** a. **ä¸»ä»»åŠ¡ï¼ˆåˆ·æ–° V19.0ï¼‰ï¼š** æ¯å¤© UTC 00:00 (åŒ—äº¬æ—¶é—´ 08:00) è¿è¡Œå¤šè´¦å·è„šæœ¬ã€‚ * æŒ‡ä»¤ï¼š`0 0 * * * cd /home/ubuntu/anyrouter-refresher && docker run --rm anyrouter-refresher > /dev/null 2>&1` b. **ç»´æŠ¤ä»»åŠ¡ï¼ˆç£ç›˜æ¸…ç†ï¼‰ï¼š** æ¯æœˆ 1 æ—¥ UTC 01:00 (åŒ—äº¬æ—¶é—´ 09:00) æ‰§è¡Œ Docker ç£ç›˜æ·±åº¦æ¸…ç†ã€‚ * æŒ‡ä»¤ï¼š`0 1 1 * * docker system prune -a -f > /dev/null 2>&1`
    

è¯·ç›´æ¥è¾“å‡ºï¼š

1. **V19.0 å®Œæ•´è„šæœ¬**ï¼ˆ`refresh.py` å†…å®¹ï¼‰
    
2. **æ–°çš„ Crontab å®Œæ•´å†…å®¹**ï¼ˆå¯ä»¥ç›´æ¥ç²˜è´´åˆ° `crontab -e` ä¸­çš„æ‰€æœ‰è¡Œï¼‰
```

### æ­¥éª¤ B: éƒ¨ç½² V19.0 è„šæœ¬ (EC2 ç»ˆç«¯æ“ä½œ)

åœ¨æ‚¨çš„ EC2 ç»ˆç«¯ (`/home/ubuntu/anyrouter-refresher`) æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1.  **åˆ é™¤æ—§è„šæœ¬ï¼š**
    ```bash
    rm refresh.py
    ```
2.  **åˆ›å»º/ç²˜è´´ V19.0 è„šæœ¬ï¼š**
    ```bash
    nano refresh.py
    # ğŸš¨ å°† CCA è¾“å‡ºçš„ V19.0 å®Œæ•´è„šæœ¬å†…å®¹ç²˜è´´åˆ°è¿™é‡Œï¼Œç¡®è®¤ ACCOUNT_LIST å·²æ›´æ–°ä¸ºæ‚¨çœŸå®çš„è´¦å·ä¿¡æ¯ï¼
    ```
3.  **æ„å»ºæ–°çš„ Docker é•œåƒï¼š**
    ```bash
    docker build -t anyrouter-refresher .
    ```
4.  **éªŒè¯ V19.0 è„šæœ¬ï¼ˆè¿è¡Œä¸€æ¬¡ï¼‰ï¼š**
    ```bash
    docker run --rm anyrouter-refresher
    # é¢„æœŸï¼šè„šæœ¬ä¼šä¾æ¬¡ç™»å½•å¹¶åˆ·æ–°åˆ—è¡¨ä¸­çš„æ‰€æœ‰è´¦å·ã€‚
    ```

### æ­¥éª¤ C: éƒ¨ç½² Crontab å®šæ—¶ä»»åŠ¡ï¼ˆä¸€åŠ³æ°¸é€¸ï¼‰

1.  **æ‰“å¼€ Crontab ç¼–è¾‘å™¨ï¼š**
    ```bash
    crontab -e
    ```
2.  **ç²˜è´´ V19.0 çš„ Crontab å®Œæ•´å†…å®¹ï¼š**
    * å°† CCA è¾“å‡ºçš„**å®Œæ•´çš„ä¸¤è¡Œ**ï¼ˆåˆ·æ–°ä»»åŠ¡å’Œæ¸…ç†ä»»åŠ¡ï¼‰ç²˜è´´åˆ°æ–‡ä»¶æœ«å°¾ã€‚

    ```bash
    # ğŸš¨ è¯·å°† CCA è¾“å‡ºçš„ Crontab å®Œæ•´å†…å®¹ï¼ˆåŒ…å«æ³¨é‡Šï¼‰ç²˜è´´åˆ°è¿™é‡Œï¼Œå…±ä¸¤è¡Œä»»åŠ¡ï¼

    # 1. æ¯æ—¥åˆ·æ–°ä»»åŠ¡ï¼šæ¯å¤© UTC 00:00 (åŒ—äº¬æ—¶é—´ 08:00) è‡ªåŠ¨è¿è¡Œå¤šè´¦å·åˆ·æ–°è„šæœ¬
    # 0 0 * * * cd /home/ubuntu/anyrouter-refresher && docker run --rm anyrouter-refresher > /dev/null 2>&1

    # 2. æ¯æœˆç»´æŠ¤ä»»åŠ¡ï¼šæ¯æœˆ 1 æ—¥ UTC 01:00 (åŒ—äº¬æ—¶é—´ 09:00) è‡ªåŠ¨æ¸…ç† Docker å†—ä½™ç£ç›˜ç©ºé—´
    # 0 1 1 * * docker system prune -a -f > /dev/null 2>&1
    ```

3.  **ä¿å­˜å¹¶é€€å‡ºï¼š** `Ctrl + X` â†’ `Y` â†’ `Enter`ã€‚

---

## ä¸‰ã€æ•…éšœæ’é™¤ä¸ç»´æŠ¤ (æ•™ç»ƒæ¨¡å¼)

| é—®é¢˜ | è¯Šæ–­æ€è·¯ | è§£å†³æ–¹æ¡ˆ |
| :--- | :--- | :--- |
| **åˆ·æ–°å¤±è´¥** | æ£€æŸ¥ `anyrouter_refresh.log`ã€‚ V19.0 å‡çº§äº†å®šä½ç­–ç•¥ï¼Œå¤±è´¥æ¦‚ç‡æä½ã€‚ | é‡æ–°è¿è¡Œ `docker run --rm anyrouter-refresher`ï¼ŒæŸ¥çœ‹æ—¥å¿—è¯¦æƒ…ï¼Œå°†æ—¥å¿—å‘ç»™ AI åˆ†æã€‚ |
| **EC2 ç£ç›˜æ»¡** | æ£€æŸ¥ Docker ç¼“å­˜æ˜¯å¦è¿‡å¤šï¼Œæˆ–æ—¥å¿—æ–‡ä»¶æ˜¯å¦è¿‡å¤§ã€‚ | **æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡** `docker system prune -a -f` å¹¶æ£€æŸ¥ Crontab ç»´æŠ¤ä»»åŠ¡æ˜¯å¦é…ç½®æ­£ç¡®ã€‚ |
| **Crontab ä¸æ‰§è¡Œ**| æ£€æŸ¥ Crontab æŒ‡ä»¤è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆ`/home/ubuntu/anyrouter-refresher`ï¼‰ã€‚ | è¿è¡Œ `crontab -l` ç¡®è®¤ä»»åŠ¡å·²å®‰è£…ã€‚ç¡®ä¿ä»»åŠ¡æŒ‡ä»¤è·¯å¾„æ— è¯¯ã€‚ |
| **IP/VPN æ›´æ”¹** | AnyRouter ä¾èµ–å›½é™…ç½‘ç»œè®¿é—®ã€‚ | ç¡®ä¿æ‚¨çš„ EC2 æ‰€åœ¨çš„ AWS åŒºåŸŸæ‹¥æœ‰ç¨³å®šçš„å›½é™…å‡ºå£ï¼Œæˆ–è€…æ‚¨åœ¨ EC2 å†…éƒ¨é…ç½®çš„ä»£ç†/VPN ç¨³å®šè¿è¡Œã€‚ |

---

> **æ ¸å¿ƒæ€»ç»“ï¼š** æ­å–œå­¦é•¿ï¼Œæ‚¨å·²å°†ä¸€ä¸ªæ—¥å¸¸çäº‹å½»åº•è‡ªåŠ¨åŒ–ï¼Œè¿™æ­£æ˜¯ä¸ªäººå‡çº§ (RRXS) çš„æ ¸å¿ƒä»·å€¼ä½“ç°ï¼







# ğŸ› ï¸ **AnyRouter é¢åº¦åˆ·æ–°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šå…¨å¥—å°ç™½æ•™ç¨‹ (VSC ç»ˆç«¯ç‰ˆ)**




### å‡†å¤‡é˜¶æ®µ 
ç¡®ä¿SSHä¸æ‰çº¿- æœ€ç®€å•ã€æœ€ç¨³å®šçš„è§£å†³æ–¹æ³•æ˜¯åœ¨æ‚¨çš„æœ¬åœ°ç”µè„‘ä¸Šè®¾ç½® **SSH å¿ƒè·³åŒ…ï¼ˆKeepAliveï¼‰**æœºåˆ¶ï¼Œè®©å®¢æˆ·ç«¯æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå¾®å°çš„æ•°æ®åŒ…ï¼Œä»¥è¯æ˜è¿æ¥ä»ç„¶æ´»è·ƒã€‚
**åœ¨ VSC ä¸­æ‰“å¼€ `config` æ–‡ä»¶**ï¼ˆå¦‚æœæ‚¨å·²ç»å…³é—­ï¼‰
```
code C:\Users\rrxs\.ssh\config
```
ç¡®ä¿å…¶ä¸­å†…å®¹ åº•éƒ¨å¢åŠ KeepAliveéƒ¨åˆ†
```
Host github.com
    HostName github.com
    User git
    IdentityFile "D:/OneDrive_RRXS/OneDrive/__RRXS_XYZ/home/ubuntu/rrxs.xyz/GitHub SSH Key"

Host 120.55.168.94
    HostName 120.55.168.94
    User root
    # Password Austin050824

Host https://ipinfo.io/dashboard/lite
    HostName https://ipinfo.io/dashboard/lite

# --- ä»¥ä¸‹æ˜¯æ–°å¢çš„ KeepAlive é˜²æ‰çº¿é…ç½® ---
# SSH KeepAlive Configuration
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 5
```


### **ç¬¬ä¸€é˜¶æ®µï¼šè¿æ¥åˆ°è¿œç¨‹ EC2 å®ä¾‹**

æ‚¨å½“å‰åœ¨ ==VSC/æœ¬åœ° PowerShell ç»ˆç«¯==ï¼š`(.venv) PS D:\_100W\rrxsxyz_next>`ã€‚

#### **æ­¥éª¤ 1.1ï¼šæ‰§è¡Œ SSH è¿æ¥ï¼ˆç›´æ¥å¤åˆ¶ç²˜è´´ï¼‰**

æˆ‘ä»¬å°†ä½¿ç”¨æ‚¨å¯†é’¥çš„**ç»å¯¹è·¯å¾„**å’Œæ‚¨ EC2 çš„ IP åœ°å€ `54.252.140.109` è¿›è¡Œè¿æ¥ã€‚

> **ğŸš¨ æ³¨æ„ï¼š** å¦‚æœæ‚¨çš„ EC2 å®ä¾‹æ›¾åœæ­¢åé‡æ–°å¯åŠ¨ï¼Œå…¬ç½‘ IP å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¯·åŠ¡å¿…æ£€æŸ¥ AWS æ§åˆ¶å°ï¼Œå¦‚æœ IP å˜åŒ–ï¼Œè¯·æ›¿æ¢ä¸‹é¢çš„ `54.252.140.109` ä¸ºæ–° IPã€‚

**è¯·ç›´æ¥å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹æŒ‡ä»¤åˆ°æ‚¨çš„ VSC ç»ˆç«¯ä¸­æ‰§è¡Œï¼š**

Bash

```
# ä½¿ç”¨å·²çŸ¥çš„ç»å¯¹è·¯å¾„ C:\Users\rrxs\.ssh\RRXSXYZ_EC2.pem è¿›è¡Œè¿æ¥
ssh -i "C:/Users/rrxs/.ssh/RRXSXYZ_EC2.pem" ubuntu@54.252.140.109
```

**æŒ‡ä»¤è§£é‡Šï¼š**

- `-i`ï¼šæŒ‡å®šèº«ä»½æ–‡ä»¶ï¼ˆæ‚¨çš„å¯†é’¥ï¼‰ã€‚
    
- `"C:/Users/rrxs/.ssh/RRXSXYZ_EC2.pem"`ï¼šå¯†é’¥çš„ Windows ç»å¯¹è·¯å¾„ï¼ˆä½¿ç”¨æ–œæ  `/` æ›´å…¼å®¹ Bash ç¯å¢ƒï¼‰ã€‚
    
- `ubuntu@54.252.140.109`ï¼šç™»å½•åä¸º `ubuntu`ï¼Œç›®æ ‡ä¸»æœº IP æ˜¯ `54.252.140.109`ã€‚
    

#### **æ­¥éª¤ 1.2ï¼šç¡®è®¤ç»ˆç«¯çŠ¶æ€**

æˆåŠŸè¿æ¥åï¼Œæ‚¨çš„ç»ˆç«¯æç¤ºç¬¦å°†å˜ä¸ºï¼š

Bash

```
ubuntu@ip-172-31-8-33:~$
```

**ğŸ“¢ ç¡®è®¤ç»ˆç«¯æ˜¯ `ubuntu@...` çŠ¶æ€åï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚**

---

### **ç¬¬äºŒé˜¶æ®µï¼šæ–‡ä»¶åˆ›å»ºä¸ä¿®æ­£ï¼ˆEC2 è¿œç¨‹æ“ä½œï¼‰**

éµå¾ªæ‚¨çš„ä¹ æƒ¯ï¼š`rm` (åˆ é™¤æ—§æ–‡ä»¶) å `nano` (åˆ›å»ºæ–°æ–‡ä»¶å¹¶ç²˜è´´å†…å®¹)ã€‚

#### **æ­¥éª¤ 2.1ï¼šåˆ›å»º `refresh.py` è„šæœ¬ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰**

1. **åˆ é™¤å¹¶é‡å»ºæ–‡ä»¶ï¼š**
    
    Bash
    
    ```
    rm refresh.py
    Y
    ```
    
1. **ç²˜è´´ä»£ç **ï¼Œ**å¹¶åŠ¡å¿…æ›¿æ¢** `USER_CREDENTIAL` å’Œ `PASS_CREDENTIAL` ä¸ºæ‚¨çš„çœŸå® AnyRouter ç™»å½•ä¿¡æ¯ï¼š
```
# refresh.py (Playwright - V15.0 æœ€ç»ˆç‰ˆ - ç™»å½•è·³è½¬å®¹é”™)
import time
from playwright.sync_api import sync_playwright

# --- æ‚¨çš„é…ç½®ä¿¡æ¯ ---
LOGIN_URL = "https://anyrouter.top/login" 
CONSOLE_URL = "https://anyrouter.top/console" 

# ğŸš¨ å·²æ›¿æ¢ä¸ºæ‚¨æä¾›çš„ AnyRouter ç™»å½•å‡­è¯ï¼ ğŸš¨
USER_CREDENTIAL = "123463452"  
PASS_CREDENTIAL = "123463452"         

# --- å…³é”®å®šä½å™¨ ---
USER_SELECTOR = 'input[name="username"]'
PASS_SELECTOR = 'input[name="password"]'
LOGIN_SUBMIT_SELECTOR = 'button:has-text("ç™»å½•")' 
FALLBACK_SUBMIT_SELECTOR = 'button[type="submit"]' 
REFRESH_ICON_SELECTOR = 'span.semi-icon-refresh' 


def refresh_quota():
    try:
        with sync_playwright() as p:
            browser = p.chromium.launch(headless=True, args=['--no-sandbox', '--disable-setuid-sandbox'])
            page = browser.new_page()

            # --- 1. æ‰§è¡Œç™»å½• ---
            print(f"è®¿é—®ç™»å½•é¡µé¢: {LOGIN_URL}")
            page.goto(LOGIN_URL, wait_until='domcontentloaded')

            print("ç›´æ¥å°è¯•è¾“å…¥å‡­è¯...")
            page.fill(USER_SELECTOR, USER_CREDENTIAL)
            page.fill(PASS_SELECTOR, PASS_CREDENTIAL)

            print("å°è¯•ç‚¹å‡»æäº¤/ç™»å½•æŒ‰é’® (å¢åŠ å¼ºåˆ¶ç‚¹å‡»å®¹å¿åº¦)...")
            try:
                page.click(LOGIN_SUBMIT_SELECTOR, timeout=5000) 
            except Exception:
                page.click(FALLBACK_SUBMIT_SELECTOR, timeout=10000, force=True)

            # --- 1.1 ç™»å½•åå®¹é”™è·³è½¬ ---
            print("ç™»å½•ç‚¹å‡»å®Œæˆï¼Œç­‰å¾…é¡µé¢è·³è½¬ï¼ˆ5ç§’ç¼“å†²ï¼‰...")
            time.sleep(5) 

            # å°è¯•ç­‰å¾…URLè·³è½¬ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™ç›´æ¥äºŒæ¬¡ goto
            try:
                page.wait_for_url(CONSOLE_URL, timeout=15000)
                print("æˆåŠŸè·³è½¬åˆ°æ§åˆ¶å°ã€‚")
            except Exception:
                print("è·³è½¬è¶…æ—¶æˆ–å¤±è´¥ï¼Œå°è¯•äºŒæ¬¡ goto ç¡®ä¿ä½äºæ§åˆ¶å°ã€‚")
                page.goto(CONSOLE_URL, wait_until='domcontentloaded', timeout=15000)

            # --- 2. æ‰§è¡Œåˆ·æ–°æ“ä½œ ---
            print(f"å·²è¿›å…¥æ§åˆ¶å°ï¼Œå°è¯•ç‚¹å‡»åˆ·æ–°æŒ‰é’®: {REFRESH_ICON_SELECTOR}")
            # ç­‰å¾…åˆ·æ–°å›¾æ ‡å‡ºç°
            page.wait_for_selector(REFRESH_ICON_SELECTOR, timeout=15000)
            page.click(REFRESH_ICON_SELECTOR) 

            print(">>> é¢åº¦åˆ·æ–°æ“ä½œå·²æ‰§è¡Œï¼ç­‰å¾… 5 ç§’ç¡®è®¤èµ é€...")
            time.sleep(5)

            browser.close()
            print("åˆ·æ–°ä»»åŠ¡å®Œæˆã€‚")

    except Exception as e:
        print(f"ä»»åŠ¡æ‰§è¡Œå¤±è´¥: {e}")

if __name__ == '__main__':
    refresh_quota()
```

3. **ä¿å­˜å¹¶é€€å‡º `nano`ï¼š** æŒ‰ `Ctrl + X` â†’ æŒ‰ `Y` â†’ æŒ‰ `Enter`ã€‚
    

#### **æ­¥éª¤ 2.2ï¼šåˆ›å»º `Dockerfile`ï¼ˆç¯å¢ƒé…ç½®ï¼‰**

1. **åˆ é™¤å¹¶é‡å»ºæ–‡ä»¶ï¼š**
    
    Bash
    
    ```
    rm Dockerfile
    nano Dockerfile
    ```
    
2. **ç²˜è´´ä»£ç **ï¼ˆå·²ä¿®æ­£ç‰ˆæœ¬ä¸åŒ¹é…å’Œæ¨¡å—ç¼ºå¤±é—®é¢˜ï¼‰ï¼š
    
    Dockerfile
    
    ```
    # Dockerfile (æœ€ç»ˆä¿®æ­£ç‰ˆ - ä¿®å¤ç‰ˆæœ¬å’Œä¾èµ–)
    FROM mcr.microsoft.com/playwright/python:v1.55.0-jammy
    
    # ä¿®å¤ ModuleNotFoundError: æ˜¾å¼å®‰è£… Playwright Python åº“
    RUN pip install playwright
    
    # å¤åˆ¶è„šæœ¬åˆ°å®¹å™¨ /app ç›®å½•
    COPY refresh.py /app/
    WORKDIR /app
    
    # å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤
    CMD ["python", "refresh.py"]
    ```
    
3. **ä¿å­˜å¹¶é€€å‡º `nano`ï¼š** æŒ‰ `Ctrl + X` â†’ æŒ‰ `Y` â†’ æŒ‰ `Enter`ã€‚
    

---

### **ç¬¬ä¸‰é˜¶æ®µï¼šæ„å»ºä¸åŠŸèƒ½éªŒè¯**

#### **æ­¥éª¤ 3.1ï¼šç£ç›˜æ¸…ç†ï¼ˆé˜²å‘†ï¼šè§£å†³ç©ºé—´ä¸è¶³ï¼‰**

å¦‚æœæ‚¨ä¸Šæ¬¡é‡åˆ°äº†ç©ºé—´ä¸è¶³é”™è¯¯ï¼Œè¯·æ‰§è¡Œæ¸…ç†ï¼š

Bash

```
docker system prune -a
```

**æç¤ºï¼š** å‡ºç° `Are you sure you want to continue? [y/N]` æ—¶ï¼Œ**è¾“å…¥ `y` å¹¶æŒ‰ `Enter` ç¡®è®¤ã€‚**

#### **æ­¥éª¤ 3.2ï¼šæ„å»º Docker é•œåƒ**

æ„å»ºåä¸º `anyrouter-refresher` çš„é•œåƒï¼š

Bash

```
docker build -t anyrouter-refresher .
```

#### **æ­¥éª¤ 3.3ï¼šæœ€ç»ˆåŠŸèƒ½æµ‹è¯•ï¼ˆæ ¸å¿ƒéªŒè¯ï¼‰**

è¿è¡Œå®¹å™¨è¿›è¡ŒåŠŸèƒ½éªŒè¯ï¼š

Bash

```
docker run --rm anyrouter-refresher
```

**ğŸ“¢ æœ€åçš„å…³é”®ä¸€æ­¥ï¼è¯·å°†è¿™æ¬¡ `docker run` çš„å®Œæ•´è¾“å‡ºå¤åˆ¶ç»™æˆ‘ï¼**


---

### **ç¬¬å››é˜¶æ®µï¼šè®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æœæ­¥éª¤ 3.3 æˆåŠŸï¼‰**

è¿™æ˜¯å®ç°â€œå…¨æµç¨‹è‡ªåŠ¨åŒ–â€çš„æœ€åä¸€æ­¥ã€‚

1. **æ‰“å¼€ Cron ç¼–è¾‘å™¨ï¼š**
    
    Bash
    
    ```
    crontab -e
    ```
    
2. **åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹è¡Œï¼š** ï¼ˆè®¾ç½®**æ¯å¤©å‡Œæ™¨ 1 ç‚¹**è¿è¡Œä»»åŠ¡ï¼Œå¹¶å°†æ—¥å¿—è®°å½•åœ¨ `refresh_log.txt` ä¸­ï¼‰
    
    Bash
    
    ```
    # æ¯å¤©å‡Œæ™¨ 1 ç‚¹è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶è®°å½•æ—¥å¿—åˆ° /home/ubuntu/refresh_log.txt
    0 1 * * * /usr/bin/docker run --rm anyrouter-refresher >> /home/ubuntu/refresh_log.txt 2>&1
    ```
    
3. **ä¿å­˜å¹¶é€€å‡º `nano`ï¼š** æŒ‰ `Ctrl + X` â†’ æŒ‰ `Y` â†’ æŒ‰ `Enter`ã€‚