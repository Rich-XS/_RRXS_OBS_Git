"smart_sources:印象笔记/Stock_Market/___Data Integrity.sql.md": {"path":"印象笔记/Stock_Market/___Data Integrity.sql.md","embeddings":{"TaylorAI/bge-micro-v2":{"vec":[-0.04788379,-0.08394858,0.00947647,-0.04460695,-0.01656135,-0.00328897,-0.03241831,-0.03501392,0.05890272,0.02906773,0.05475658,-0.0375843,0.07199844,-0.01396272,-0.01862537,-0.01144814,-0.03816313,-0.0082684,-0.07290417,0.0260015,0.01053748,-0.04473348,-0.00309084,-0.04490025,0.06174074,0.00688872,-0.01573683,-0.00553668,-0.07317255,-0.19294873,-0.00905156,-0.04810641,0.02245395,-0.02256603,-0.00044982,-0.04558648,-0.03364199,0.04502624,-0.03256714,0.03059487,-0.03353745,-0.01616381,-0.00282385,0.00345494,-0.00220667,-0.08102617,-0.02846063,-0.01220778,0.03041875,-0.00482887,-0.06299699,-0.01266959,0.01339901,0.01295997,0.02140039,0.01187372,0.03194099,0.05747205,0.01402723,-0.00142911,0.06857608,0.06649922,-0.15688898,0.08912699,0.02126216,0.03222329,0.03477876,-0.0302222,-0.00420346,0.01877541,-0.02335025,-0.0106452,-0.04440474,0.04414819,0.04380518,-0.07721798,0.02016743,0.00291224,-0.02672302,0.00309142,-0.02174907,0.05250553,0.00084877,-0.02674468,0.00403059,0.03246398,0.04688457,-0.0133329,0.02915652,0.01204722,0.03136214,-0.06094359,0.00627556,0.00357174,-0.00947329,0.0124792,0.02474646,0.02627427,-0.08413577,0.08811614,-0.00226942,0.04705262,-0.11970785,0.01335788,0.02868286,-0.02902272,-0.04856001,-0.00806067,-0.02375404,-0.03463754,-0.00887009,0.00650288,0.02883841,-0.06399501,-0.02383111,0.09069937,0.03110868,-0.07094507,-0.02730944,-0.00697749,0.01178782,-0.00127035,0.05040346,0.04885741,-0.02826293,-0.00733123,0.05479173,0.0377004,-0.00968918,0.07391562,0.07142443,0.0225317,-0.08795444,-0.01668141,0.0122752,0.01830504,-0.05083751,0.05441935,0.01883703,-0.05831191,-0.07281893,-0.11262085,-0.01262122,-0.04395022,-0.00989739,0.13802199,-0.03272774,0.01124462,-0.1043565,-0.0442866,-0.12420077,0.01526287,-0.01310258,-0.02196888,-0.04387622,0.0409744,0.08154209,0.07529369,-0.03293382,-0.09262149,-0.04599812,-0.06691078,-0.06321529,0.16190584,0.00788934,-0.07686339,-0.04717265,0.06743854,0.01465027,0.01164942,0.0463059,0.01983807,0.01013552,0.00498792,0.07259317,-0.00376982,0.02231314,-0.05034378,0.00603229,0.01554886,0.02019102,-0.05316981,-0.05342584,0.01858722,0.00832818,-0.07005657,-0.05379353,0.0211016,0.03242973,0.00477726,-0.02461828,-0.00655321,-0.01398554,-0.02448981,-0.07363055,-0.04591534,-0.04025069,0.01059887,0.01468702,-0.05382637,0.1282732,-0.00155916,-0.02228362,0.00221958,-0.00169626,-0.00970706,0.03423725,-0.02461857,0.04068338,0.03766941,0.00046251,0.06288937,-0.00327078,0.05144259,-0.00226987,-0.01473611,0.0224748,0.07079504,0.06084153,0.00954716,0.02376604,0.0292154,0.01323515,-0.19927521,0.00024459,-0.01141199,-0.01377602,-0.04028924,-0.09038338,-0.00310602,0.00583832,0.02224242,0.06584745,0.08291807,0.04884803,-0.04030413,0.00230424,-0.0234035,-0.01708967,0.00128351,-0.0258881,-0.01567926,-0.01298099,-0.0610478,0.03793452,0.00536917,-0.03505792,0.09461847,-0.01793485,0.12207534,-0.00773963,0.00505254,0.01934388,0.03616191,0.03349532,-0.00330614,-0.07357274,0.02653757,0.02552254,-0.01633313,0.05524551,-0.02748909,-0.03455826,-0.02595885,-0.03266492,-0.00841293,-0.05622349,0.06505343,-0.02629762,0.04577186,-0.04141335,-0.0354536,0.10874169,0.06221422,-0.00069903,0.03243665,0.09216835,0.06153496,-0.05010854,-0.0171532,0.02412574,0.00411102,0.05435971,-0.02491393,-0.05750133,0.00848471,0.03355282,-0.01761792,-0.02590441,0.01689944,-0.0156485,0.02925386,-0.00262997,-0.07854889,0.08643876,0.00324826,-0.01630588,0.01560174,0.04123553,-0.05869238,0.06156768,0.02655184,0.02560579,0.06558643,0.02460062,0.08226047,0.11214763,0.07806737,0.05542527,0.06126014,-0.01131273,0.0873005,0.01713494,-0.05111361,-0.05862469,-0.06186889,0.02844296,0.09738325,-0.06242127,-0.26841566,0.00691418,-0.04916249,0.01952853,0.02473087,-0.04100134,-0.04231854,-0.04182458,-0.09228329,-0.01287418,-0.04617494,0.00400445,0.03327092,-0.07138937,-0.03407576,-0.00606816,0.04545053,-0.04229343,0.03688587,0.0244372,0.03164246,0.02857569,0.20430134,0.07406012,0.04095278,-0.01246662,-0.00777197,0.02717454,0.05524586,0.07027633,0.02577645,0.0108152,0.07341511,0.00564231,-0.00255446,0.05516626,-0.0249532,0.0729885,0.04767838,0.0258342,-0.06163726,0.05357507,-0.03545524,0.02705281,0.09110348,-0.05984627,0.01253028,-0.07135823,0.00473803,-0.00327678,-0.04690412,0.04017282,-0.06633975,-0.0006401,0.00454334,0.01853129,-0.02026327,-0.01641293,0.00758678,0.01620949,-0.0005228,-0.03149194,-0.00258019,0.03872081,-0.02960302],"last_embed":{"hash":"932418f8ccf4d1df5972cc022ea4f742e76c361e6670f890e5354af3bff6e44f","tokens":454}}},"last_read":{"hash":"932418f8ccf4d1df5972cc022ea4f742e76c361e6670f890e5354af3bff6e44f","at":1757483208154},"class_name":"SmartSource","last_import":{"mtime":1483530293000,"size":33174,"at":1757413852750,"hash":"932418f8ccf4d1df5972cc022ea4f742e76c361e6670f890e5354af3bff6e44f"},"blocks":{"#---frontmatter---":[1,2],"#":[3,11],"#======= Python.2:  Update market\\_stock\\_ndp --- stock code and name":[12,16],"#======= Python.2:  Update market\\_stock\\_ndp --- stock code and name#{1}":[13,16],"#======= Python.3:  Update Prices in ndp -- h\\_stock\\_mkt prices ... for recdent 8 days":[17,24],"#======= Python.3:  Update Prices in ndp -- h\\_stock\\_mkt prices ... for recdent 8 days#{1}":[18,24],"#======= Python.4: Update \\_\\_stock\\_dayS\\_ for ndp\\_O2OC":[25,44],"#======= Python.4: Update \\_\\_stock\\_dayS\\_ for ndp\\_O2OC#{1}":[26,44],"#======= Python.5:  Put info of O2O and O2C (2nd Day Only) into O2OC.":[45,50],"#======= Python.5:  Put info of O2O and O2C (2nd Day Only) into O2OC.#{1}":[46,50],"#======= Python.6:  Write future Days' O2O (2,3,4,5) and O2C\\_Equalvalent (3,5) to O2OC":[51,91],"#======= Python.6:  Write future Days' O2O (2,3,4,5) and O2C\\_Equalvalent (3,5) to O2OC#{1}":[52,91],"#======= Python.7:  Prepare \\_ndp\\_opc from market\\_stock\\_ndp\\_o2oc and mstock":[92,92],"#----- insert new market\\_stock records from 'mstock' to '...\\_ndp\\_opc' ... with prices info and p\\_change calculation..":[93,133],"#----- insert new market\\_stock records from 'mstock' to '...\\_ndp\\_opc' ... with prices info and p\\_change calculation..#{1}":[94,133],"#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~":[134,138],"#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#{1}":[135,138],"#update exchange\\_sp\\_dynnv as xp,topv\\_group\\_sp as tp set xp.Grp\\_NV=Null where xp.group\\_symbol=tp.symbol and tp.close\\_status=\"no\\_curve\";     # 0.04s":[139,150],"#update exchange\\_sp\\_dynnv as xp,topv\\_group\\_sp as tp set xp.Grp\\_NV=Null where xp.group\\_symbol=tp.symbol and tp.close\\_status=\"no\\_curve\";     # 0.04s#{1}":[140,150],"#===============market\\_stock============":[151,152],"#===============market\\_stock============#{1}":[152,152],"#SELECT concat(date,symbol),count(concat(date,symbol)) FROM \\`market\\_stock\\` group by concat(date,symbol) HAVING count(concat(date,symbol))>1 ;":[153,156],"#SELECT concat(date,symbol),count(concat(date,symbol)) FROM \\`market\\_stock\\` group by concat(date,symbol) HAVING count(concat(date,symbol))>1 ;#{1}":[155,156],"#SELECT concat(date,symbol),count(concat(date,symbol)) FROM \\`h\\_market\\_stock\\` group by concat(date,symbol) HAVING count(concat(date,symbol))>1 ;":[157,161],"#SELECT concat(date,symbol),count(concat(date,symbol)) FROM \\`h\\_market\\_stock\\` group by concat(date,symbol) HAVING count(concat(date,symbol))>1 ;#{1}":[159,161],"#SELECT concat(date,symbol),count(concat(date,symbol)) FROM \\`market\\_stock\\_ndp\\` group by concat(date,symbol) HAVING count(concat(date,symbol))>1 ;":[162,162],"#------ mstock------":[163,185],"#------ mstock------#{1}":[164,185],"#and DATEDIFF(date(now()),mstock.date)<00;":[186,188],"#and DATEDIFF(date(now()),mstock.date)<00;#{1}":[187,188],"#----------stock\\_pctl\\_category-------------":[189,193],"#----------stock\\_pctl\\_category-------------#{1}":[190,193],"#===================Curve=====================":[194,202],"#===================Curve=====================#{1}":[195,202],"#==================Top\\_Group==================":[203,206],"#==================Top\\_Group==================#{1}":[204,206],"#====================Exchange=======================":[207,220],"#====================Exchange=======================#{1}":[208,220],"#--- mark those Ex-Right trand\\_id \\*(-1) as new trans\\_id":[221,227],"#--- mark those Ex-Right trand\\_id \\*(-1) as new trans\\_id#{1}":[222,227],"#--> pick first/last per stock/group/date for exchange --- not considerring possible Ex-Right items yet.":[228,257],"#--> pick first/last per stock/group/date for exchange --- not considerring possible Ex-Right items yet.#{1}":[229,257],"#=================== Holding===========================":[258,260],"#=================== Holding===========================#{1}":[259,260],"#Update \\`holding\\` SET hdate='2016-11-14' where substr(xtime,1,13) between '2016-11-14 18' and '2016-11-15 08';":[261,263],"#Update \\`holding\\` SET hdate='2016-11-14' where substr(xtime,1,13) between '2016-11-14 18' and '2016-11-15 08';#{1}":[262,263],"#===================Follow\\_V=======================":[264,264],"#===================fv\\_curve=======================":[265,269],"#===================fv\\_curve=======================#{1}":[266,269],"#delete FROM \\`fv\\_curve\\_zhsp\\_0628to1028\\` where gcode like \"SP1004799\"":[270,271],"#delete FROM \\`fv\\_curve\\_zhsp\\_0628to1028\\` where gcode like \"SP1004799\"#{1}":[271,271],"#delete FROM \\`fv\\_curve\\_zhsp\\_0601to0930\\` where gcode like \"SP1004799\"":[272,276],"#delete FROM \\`fv\\_curve\\_zhsp\\_0601to0930\\` where gcode like \"SP1004799\"#{1}":[273,276],"#DELETE":[277,292],"#DELETE#{1}":[278,292],"#================= Model Prediction =====================================":[293,308],"#================= Model Prediction =====================================#{1}":[294,308],"#=========processing Debug Model\\_Prediction=====================================":[309,309],"#convert debug\\_x to debug\\_x\\_convert":[310,317],"#convert debug\\_x to debug\\_x\\_convert#{1}":[311,317],"#1/2 steps: convert debug\\_w to debug\\_w\\_convert to keep weight-table complete for all groups":[318,326],"#1/2 steps: convert debug\\_w to debug\\_w\\_convert to keep weight-table complete for all groups#{1}":[319,326],"#2/2 steps: convert debug\\_w to debug\\_w\\_convert to keep weight-table complete for all groups":[327,355],"#2/2 steps: convert debug\\_w to debug\\_w\\_convert to keep weight-table complete for all groups#{1}":[328,355]},"outlinks":[{"title":"./_resources/___Data_Integrity.sql.resources/___Data Integrity.sql","target":"./_resources/___Data_Integrity.sql.resources/___Data Integrity.sql","line":3}],"key":"印象笔记/Stock_Market/___Data Integrity.sql.md"},